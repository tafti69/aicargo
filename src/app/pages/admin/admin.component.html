<app-sidebar></app-sidebar>
<div class="loader" *ngIf="isLoading"></div>

<div class="admin-dashboard">
  <h2>Orders Controller</h2>
  <form (ngSubmit)="onCreateOrder()" [formGroup]="form">
    <div>
      <label for="val">Personal ID</label>
      <input id="val" type="text" formControlName="personalId" />
    </div>
    <div>
      <label for="val">Tracking ID</label>
      <input id="val" type="text" formControlName="trackingId" />
    </div>

    <button type="submit">
      Create Order      
    </button>
  </form>
  <div>
    <table *ngFor="let o of orders">
      <thead>
        <tr>
          <td>#</td>
          <td>თრექინგი</td>
          <td>წონა</td>
          <td>თანხა</td>
          <td>მაღაზია</td>
          <td>ვალუტა</td>
          <td>გატანა</td>
          <td>სტატუსი</td>
          <td>მოქმედება</td>
          <td>ინვოისი</td>
          <td>სტატუსი</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ o.uniqueIdentifier }}</td>
          <td>{{ o.trackingId }}</td>
          <td>{{ o.height }}</td>
          <td>{{ o.amountToPay }}</td>
          <td>
            <select
              style="width: 150px; height: 28px"
              id="curier"
              [(ngModel)]="o.partner"
            >
              <option *ngFor="let p of partners" value="p.item.name">
                {{ p.item.name }}
              </option>
            </select>
          </td>

          <td>
            <select
              style="width: 80px; height: 28px"
              id="curier"
              [(ngModel)]="o.currency"
            >
              <option *ngFor="let i of currencies" [value]="i.value">
                {{ i.value }}
              </option>
            </select>
          </td>
          <td>
            <select
              style="width: 150px; height: 28px"
              [(ngModel)]="o.deliveryType"
              id="curier"
            >
              <option *ngFor="let i of deliveries" [value]="i.id">
                {{ i.item.name }}
              </option>
            </select>
          </td>
          
          <td>
            <select
              style="width: 150px; height: 28px"
              id="curier"
              [(ngModel)]="o.status.id"
              (change)="onStatusChange($event)"
            >
              <option [value]="null">Select Country</option>
              <option *ngFor="let s of statuses" [value]="s.id">
                {{ s.item.name }}
              </option>
            </select>
          </td>
          <td>
            <button [routerLink]="['/declaration', o.id]" class="decl">
              დეკლარირება
            </button>
          </td>
          <td>
            <button [routerLink]="['/invoice', o.id]" class="invoice">
              ინვოისი
            </button>
          </td>
          <td>
            <button (click)="changeStatus(o.id)" style="background-color: rgb(16, 158, 16);" class="invoice">
              განახლება
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
