<app-sidebar></app-sidebar>

<div class="table-wrapper">
  <div class="table-header">
    <h2>ჩამოსული</h2>
  </div>
  <p-table [value]="arrived" styleClass="p-datatable-gridlines" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" [sortOrder]="-1" responsiveLayout="scroll"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]">
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="uniqueIdentifier"># <p-sortIcon field="uniqueIdentifier"></p-sortIcon></th>
        <th pSortableColumn="trackingId">თრექინგი <p-sortIcon field="trackingId"></p-sortIcon></th>
        <th pSortableColumn="height">წონა <p-sortIcon field="height"></p-sortIcon></th>
        <th pSortableColumn="paidAmount">თანხა <p-sortIcon field="paidAmount"></p-sortIcon></th>
        <th>მაღაზია</th>
        <th>ვალუტა</th>
        <th>გატანა</th>
        <th>მოქმედება</th>
        <th>ინვოისი</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-o>
      <tr>
        <td>{{ o.uniqueIdentifier }}</td>
        <td>{{ o.trackingId }}</td>
        <td>{{ o.height }}</td>
        <td>{{ o.paidAmount }}</td>
        <td>
          <select
            *ngIf="o.declaration.partner"
            style="width: 120px; height: 28px"
            id="curier"
            [(ngModel)]="o.declaration.partner.id"
          >
            <option *ngFor="let p of partners" [value]="p.id">
              {{ p.item.name }}
            </option>
          </select>
        </td>

        <td>
          <select
            style="width: 80px; height: 28px"
            id="curier"
            *ngIf="o.declaration.currency"
            [(ngModel)]="o.declaration.currency.id"
          >
            <option *ngFor="let i of currencies" [value]="i.id">
              {{ i.value }}
            </option>
          </select>
        </td>
        <td>
          <select
            style="width: 120px; height: 28px"
            [(ngModel)]="o.deliveryType.id"
            id="curier"
            *ngIf="o.deliveryType"
            (change)="onUpdateDelivery($event, o.id)"
          >
            <option *ngFor="let i of deliveries" [value]="i.id">
              {{ i.item.name }}
            </option>
          </select>
        </td>
        <td>
          <button
            [routerLink]="['/declaration', o.id]"
            class="decl"
            [style.background-color]="
              o.declaration.paidAmount ? '#52b788' : ''
            "
          >
            {{ o.declaration.paidAmount ? "დეკლარირებული" : "დეკლარირება" }}
          </button>
        </td>
        <td>
          <button
            [routerLink]="['/invoice', o.id]"
            class="invoice"
            [style.background-color]="o.documentUploaded ? '#52b788' : ''"
          >
            {{ o.documentUploaded ? "ატვირთული" : "ატვირთვა" }}
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <div class="loader" *ngIf="isLoading"></div>
</div>
